<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Benai Bernardo | Consultoria</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;800&family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --primary: #001F5B; --primary-dark: #001640; 
            --accent: #00A8E8; --accent-dark: #007bb0;
            --bg: #fdfdfd; --surface: #ffffff;
            --text: #1f2937; --text-muted: #64748b;
            --border: #e2e8f0;
            
            --c-drop: #ef4444; --c-rnp: #f59e0b; --c-iso: #06b6d4; 
            --c-pyr: #8b5cf6; --c-fst: #ec4899; --c-bi: #00A8E8; --c-tri: #6366f1;
            --wa-green: #25D366;
            --font-ui: 'Plus Jakarta Sans', sans-serif; --font-num: 'Outfit', sans-serif;
        }

        [data-theme="dark"] {
            --primary: #bae6fd; --primary-dark: #7dd3fc;
            --accent: #38bdf8;
            --bg: #0f172a; --surface: #1e293b;
            --text: #f1f5f9; --text-muted: #94a3b8;
            --border: #334155;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: var(--font-ui); }
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; flex-direction: column; overflow: hidden; transition: background 0.3s; }

        .container { max-width: 480px; width: 100%; margin: 0 auto; display: flex; flex-direction: column; height: 100%; background: var(--bg); box-shadow: 0 0 20px rgba(0,0,0,0.05); }

        /* HEADER */
        .header { background: #001F5B; padding: 20px; flex-shrink: 0; border-bottom-left-radius: 24px; border-bottom-right-radius: 24px; box-shadow: 0 10px 30px -10px rgba(0,31,91,0.3); z-index: 10; display: flex; justify-content: space-between; align-items: flex-start; color: white; transition: background 0.3s; }
        [data-theme="dark"] .header { background: #1e293b; box-shadow: none; border-bottom: 1px solid var(--border); }

        .h-info { flex: 1; padding-right: 15px; }
        .h-brand { font-size: 0.65rem; letter-spacing: 2px; opacity: 0.8; text-transform: uppercase; margin-bottom: 4px; font-weight: 700; font-family: var(--font-num); color: var(--accent); }
        .h-sub-brand { font-size:0.5rem; letter-spacing:1px; opacity:0.8; margin-bottom:10px; font-weight:600; text-transform:uppercase; color:#bae6fd; }
        [data-theme="dark"] .h-sub-brand { color: #94a3b8; }

        .h-title { font-size: 1.6rem; font-weight: 800; font-family: var(--font-num); letter-spacing: -0.5px; line-height: 1.1; color: white; margin-bottom:2px; }
        .h-sub { opacity: 0.8; font-size: 0.85rem; color: #bae6fd; font-weight: 500; margin-bottom: 10px; }
        [data-theme="dark"] .h-sub { color: #94a3b8; }
        
        .h-dates { display: flex; gap: 8px; font-size: 0.65rem; font-weight: 700; color: white; opacity:0.9; }
        .h-date-badge { background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 6px; display:flex; align-items:center; gap:4px; border:1px solid rgba(255,255,255,0.1); }
        .h-date-badge.urgent { background: rgba(239, 68, 68, 0.3); border-color: rgba(239, 68, 68, 0.5); color:#fca5a5; }
        
        .h-actions { display: flex; gap: 8px; align-items: center; }
        .h-btn { width: 40px; height: 40px; border-radius: 12px; border: none; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; cursor: pointer; transition: 0.2s; background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.2); text-decoration: none; }
        .h-btn:hover { background: rgba(255,255,255,0.25); }
        .btn-wa { background: rgba(37, 211, 102, 0.2); border-color: rgba(37, 211, 102, 0.4); color: #4ade80; }
        .btn-restore { display: none; }
        
        /* CONTENT */
        .content { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; scroll-behavior: smooth; }
        .tab-pane { display: none; animation: fade 0.3s; }
        .tab-pane.active { display: block; }

        /* --- SOPHISTICATED TITLES --- */
        .modern-title {
            text-align: center;
            font-family: var(--font-num);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.9rem;
            color: var(--primary);
            position: relative;
            display: flex; align-items: center; justify-content: center; gap: 15px;
            margin: 30px 0 20px;
            opacity: 0.8;
        }
        [data-theme="dark"] .modern-title { color: var(--accent); opacity: 1; }
        .modern-title::before, .modern-title::after {
            content: ''; height: 1px; background: var(--border); flex: 1;
        }

        /* --- BLOCOS (COLLAPSIBLE) --- */
        .section-header {
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; padding: 15px; background: #f8fafc; border-radius: 12px;
            border: 1px solid transparent; margin-bottom: 5px;
            transition: 0.2s; gap: 10px;
        }
        [data-theme="dark"] .section-header { background: #1e293b; border-color: #334155; }
        .section-header:hover { background: #f1f5f9; transform: translateY(-1px); border-color: var(--accent); }
        [data-theme="dark"] .section-header:hover { background: #334155; }

        .section-title {
            color: var(--primary); font-family: var(--font-num); 
            font-weight: 800; text-transform: uppercase; letter-spacing: 1px; 
            font-size: 0.9rem; margin: 0; padding-left: 10px;
            border-left: 4px solid var(--accent);
        }
        [data-theme="dark"] .section-title { color: var(--text); }
        
        .block-desc { font-size: 0.75rem; color: #64748b; padding-left: 15px; margin-bottom: 10px; font-style: italic; }
        [data-theme="dark"] .block-desc { color: #94a3b8; }

        .toggle-icon { transition: transform 0.3s; color: var(--accent); font-size: 1.2rem; }
        .is-closed .toggle-icon { transform: rotate(-90deg); }
        
        .block-done-btn {
            display: flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border-radius: 8px; border: 1px solid var(--border);
            color: var(--text-muted); transition: 0.2s; margin-left: auto;
        }
        .block-done-btn:hover { background: var(--success); color: white; border-color: var(--success); }
        .block-done-btn.active { background: var(--success); color: white; border-color: var(--success); }

        .block-content-area { transition: max-height 0.4s ease-in-out, opacity 0.4s; max-height: 3000px; opacity: 1; overflow: hidden; padding-top: 5px; }
        .is-closed .block-content-area { max-height: 0; opacity: 0; padding-top: 0; }

        .biset-wrap { border: 2px dashed var(--c-bi); background: #f0f9ff; margin-bottom: 20px; border-radius: 16px; padding: 30px 10px 10px 10px; position: relative; overflow: hidden; }
        [data-theme="dark"] .biset-wrap { background: rgba(0, 168, 232, 0.05); }
        .biset-lbl { position: absolute; top: 0; left: 0; background: var(--c-bi); color: white; font-size: 0.65rem; font-weight: 800; padding: 4px 12px; border-bottom-right-radius: 12px; }

        .triset-wrap { border: 2px dashed var(--c-tri); background: #fdf4ff; margin-bottom: 20px; border-radius: 16px; padding: 30px 10px 10px 10px; position: relative; overflow: hidden; }
        [data-theme="dark"] .triset-wrap { background: rgba(99, 102, 241, 0.05); }
        .triset-lbl { position: absolute; top: 0; left: 0; background: var(--c-tri); color: white; font-size: 0.65rem; font-weight: 800; padding: 4px 12px; border-bottom-right-radius: 12px; }

        /* --- EXERC√çCIOS REDESIGN --- */
        .row { 
            padding: 15px; margin-bottom: 12px; 
            border: 1px solid var(--border); border-radius: 16px; 
            background: var(--surface); position: relative; border-left: 4px solid #cbd5e1; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.03); transition: 0.2s; 
        }
        .biset-wrap .row, .triset-wrap .row { margin-bottom: 0; border: none; border-radius: 0; box-shadow: none; border-left: 4px solid transparent; border-bottom: 1px dashed var(--border); background: transparent; padding-left: 5px; padding-right: 5px; }
        .biset-wrap .row:last-child, .triset-wrap .row:last-child { border-bottom: none; }

        .row.done { opacity: 0.5; filter: grayscale(100%); background: var(--bg) !important; border-left-color: var(--border) !important; }
        
        /* Method Colors */
        .row.m-Drop { border-left-color: var(--c-drop); background: #fff5f5; }
        .row.m-RNP { border-left-color: var(--c-rnp); background: #fffaf0; }
        .row.m-Iso { border-left-color: var(--c-iso); background: #f0fdff; }
        .row.m-Pyr { border-left-color: var(--c-pyr); background: #fbf7ff; }
        [data-theme="dark"] .row.m-Drop { background: rgba(239, 68, 68, 0.05); }
        [data-theme="dark"] .row.m-RNP { background: rgba(245, 158, 11, 0.05); }
        [data-theme="dark"] .row.m-Iso { background: rgba(6, 182, 212, 0.05); }
        [data-theme="dark"] .row.m-Pyr { background: rgba(139, 92, 246, 0.05); }

        .row-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        
        .ex-title { font-size: 1rem; font-weight: 800; color: var(--text); line-height: 1.2; font-family: var(--font-num); display: flex; align-items: center; gap: 8px; text-decoration: none !important; }
        .ex-title.has-video { color: var(--accent); }
        .play-badge { font-size: 0.7rem; background: var(--accent); color: white; padding: 2px 6px; border-radius: 6px; display: flex; align-items: center; gap: 4px; font-weight: 700; transition: transform 0.2s; }
        .play-badge:active { transform: scale(0.9); }

        /* Stat Grid Layout */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
        
        .stat-box { background: rgba(255,255,255,0.6); border: 1px solid var(--border); border-radius: 10px; padding: 8px 4px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        [data-theme="dark"] .stat-box { background: rgba(0,0,0,0.2); }
        
        .stat-val { font-size: 1.1rem; font-weight: 800; color: var(--primary); font-family: var(--font-num); line-height: 1; }
        [data-theme="dark"] .stat-val { color: var(--text); }
        .stat-lbl { font-size: 0.6rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; margin-top: 4px; letter-spacing: 0.5px; }
        
        .stat-box.clickable { cursor: pointer; border-color: var(--accent); color: var(--accent); background: rgba(0,168,232,0.05); }
        .stat-box.clickable .stat-val { color: var(--accent); }
        
        .obs-box { font-size: 0.8rem; color: #b45309; background: #fffbeb; padding: 10px; border-radius: 8px; margin-top: 10px; border-left: 3px solid #f59e0b; line-height: 1.4; display: flex; gap: 8px; align-items: flex-start; }
        [data-theme="dark"] .obs-box { background: rgba(245, 158, 11, 0.1); color: #fbbf24; }

        .check-btn-lg { width: 32px; height: 32px; border-radius: 8px; border: 1px solid var(--border); background: var(--surface); color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; flex-shrink: 0; }
        .check-btn-lg:hover { border-color: var(--success); color: var(--success); }
        .row.done .check-btn-lg { background: var(--success); color: white; border-color: var(--success); box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3); }

        .load-inp { width: 50px; border: 1px solid var(--border); border-radius: 8px; padding: 4px; font-family: var(--font-num); font-weight: 700; color: var(--text); text-align: center; font-size: 0.8rem; background: var(--bg); transition: 0.2s; }
        .load-inp:focus { border-color: var(--accent); outline: none; background: var(--surface); }

        /* Logic & Method Cards - Colors */
        .logic-card { background: var(--surface); border-radius: 16px; padding: 20px; border: 1px solid var(--border); margin-bottom: 25px; }
        .logic-item { display: flex; gap: 12px; margin-bottom: 12px; align-items: flex-start; padding: 8px; border-radius: 8px; background: #f8fafc; border-left: 4px solid transparent; }
        [data-theme="dark"] .logic-item { background: rgba(255,255,255,0.03); }
        
        .logic-item.c-0 { border-left-color: #3b82f6; } .logic-item.c-0 .logic-icon { color: #3b82f6; }
        .logic-item.c-1 { border-left-color: #8b5cf6; } .logic-item.c-1 .logic-icon { color: #8b5cf6; }
        .logic-item.c-2 { border-left-color: #ec4899; } .logic-item.c-2 .logic-icon { color: #ec4899; }
        .logic-item.c-3 { border-left-color: #f59e0b; } .logic-item.c-3 .logic-icon { color: #f59e0b; }
        .logic-item.c-4 { border-left-color: #10b981; } .logic-item.c-4 .logic-icon { color: #10b981; }
        .logic-item.c-5 { border-left-color: #06b6d4; } .logic-item.c-5 .logic-icon { color: #06b6d4; }

        .logic-icon { min-width: 24px; height: 24px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; margin-top: 2px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        [data-theme="dark"] .logic-icon { background: rgba(255,255,255,0.1); }
        .logic-text { color: var(--text); font-size: 0.9rem; line-height: 1.5; font-weight: 600; }

        .method-grid { display: flex; flex-direction: column; gap: 12px; }
        .method-card { padding: 18px; border-radius: 14px; background: var(--surface); border: 1px solid rgba(0,0,0,0.05); position: relative; overflow: hidden; display: flex; gap: 15px; align-items: flex-start; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
        [data-theme="dark"] .method-card { border-color: var(--border); }
        .mc-icon { width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; color: white; flex-shrink: 0; margin-top: 2px; }
        .mc-content { flex: 1; }
        .mc-title { font-family: var(--font-num); font-weight: 800; font-size: 1rem; margin-bottom: 4px; color: var(--text); }
        .mc-text { font-size: 0.85rem; color: var(--text-muted); line-height: 1.5; }
        
        /* Subtle/Sophisticated Card Colors */
        .mc-danger { background: #f9fafb; border: 1px solid #e5e7eb; } .mc-danger .mc-icon { background: #e5e7eb; color: #64748b; }
        .mc-blue { background: #f9fafb; border: 1px solid #e5e7eb; } .mc-blue .mc-icon { background: #e5e7eb; color: #64748b; }
        [data-theme="dark"] .mc-danger { background: #1e293b; border-color: #334155; } [data-theme="dark"] .mc-danger .mc-icon { background: #334155; color: #94a3b8; }
        [data-theme="dark"] .mc-blue { background: #1e293b; border-color: #334155; } [data-theme="dark"] .mc-blue .mc-icon { background: #334155; color: #94a3b8; }

        /* Feedback */
        .feedback-box { background: var(--surface); border: 1px solid var(--border); border-radius: 24px; padding: 30px 20px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.05); }
        .fb-title { font-family: var(--font-num); font-weight: 800; font-size: 1.4rem; color: var(--primary); margin-bottom: 5px; }
        [data-theme="dark"] .fb-title { color: white; }
        .fb-sub { color: var(--text-muted); font-size: 0.9rem; margin-bottom: 25px; }
        .stars { display: flex; justify-content: center; gap: 12px; margin-bottom: 25px; }
        .star { font-size: 2.2rem; color: var(--border); cursor: pointer; transition: 0.2s; }
        .star.filled { color: #f59e0b; transform: scale(1.1); filter: drop-shadow(0 2px 4px rgba(245, 158, 11, 0.3)); }
        .fb-area { width: 100%; border: 2px solid var(--border); border-radius: 16px; padding: 15px; font-family: var(--font-ui); margin-bottom: 15px; resize: none; font-size: 0.95rem; background: var(--bg); transition: 0.3s; color: var(--text); }
        .fb-area:focus { border-color: var(--accent); background: var(--surface); outline: none; }

        /* PSE SLIDER */
        .pse-container { margin: 20px 0; text-align: left; background: var(--bg); padding: 15px; border-radius: 16px; border: 1px solid var(--border); }
        .pse-label { font-size: 0.8rem; font-weight: 800; color: var(--text-muted); margin-bottom: 10px; display: flex; justify-content: space-between; }
        .pse-val { color: var(--accent); font-size: 1.2rem; }
        .pse-range { -webkit-appearance: none; width: 100%; height: 8px; background: var(--border); border-radius: 5px; outline: none; }
        .pse-range::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%; background: var(--accent); cursor: pointer; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        /* NAV */
        .nav { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 380px; height: 65px; background: var(--surface); border-radius: 35px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: flex; justify-content: space-around; align-items: center; z-index: 90; border: 1px solid rgba(0,0,0,0.05); padding: 0 10px; }
        [data-theme="dark"] .nav { border: 1px solid var(--border); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .nav-btn { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; color: #cbd5e1; font-size: 0.65rem; font-weight: 700; cursor: pointer; transition: 0.2s; position: relative; }
        .nav-btn.active { color: var(--primary); transform: translateY(-3px); }
        [data-theme="dark"] .nav-btn.active { color: var(--accent); }
        .nav-btn.active::after { content: ''; width: 5px; height: 5px; background: var(--accent); border-radius: 50%; position: absolute; bottom: -6px; }
        .nav-btn i { font-size: 1.3rem; }

        /* TIMER */
        .timer-ov { position: fixed; inset: 0; background: rgba(0,31,91,0.95); z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; color: white; backdrop-filter: blur(5px); }
        [data-theme="dark"] .timer-ov { background: rgba(15, 23, 42, 0.95); }
        .t-disp { font-size: 5rem; font-weight: 900; font-family: var(--font-num); font-variant-numeric: tabular-nums; margin: 20px 0; }
        .t-row { display: flex; gap: 20px; }
        .t-btn { width: 70px; height: 70px; border-radius: 50%; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; font-size: 1.1rem; cursor: pointer; font-weight: 700; transition: 0.2s; }
        .t-btn:active { transform: scale(0.9); background: white; color: var(--primary); }

        /* BLOCKED OVERLAY */
        #blocked-ov { position: fixed; inset: 0; background: #0f172a; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
        .btn-send-fb { background: var(--wa-green); color: white; border: none; padding: 18px; width: 100%; border-radius: 14px; font-weight: 800; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3); transition: 0.2s; text-decoration: none; }
        
        /* Loading */
        .loading-state { text-align:center; padding:50px 20px; color:var(--text-muted); }
        .spin { animation: spin 1s linear infinite; font-size: 2rem; margin-bottom: 15px; color: var(--accent); }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        @keyframes fade { from{opacity:0} to{opacity:1} }
        
        /* PDF BTN */
        .pdf-dl-btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid var(--border); border-radius: 12px; background: white; color: var(--primary); font-weight: 700; font-size: 0.8rem; cursor: pointer; }
        [data-theme="dark"] .pdf-dl-btn { background: #1e293b; color: white; border-color: #334155; }
        
        /* Print Area */
        #print-area { display: none; }
    </style>
</head>
<body>

<!-- BLOCKED SCREEN -->
<div id="blocked-ov">
    <i class="fa-solid fa-lock" style="font-size: 3rem; color: #ef4444; margin-bottom: 20px;"></i>
    <h2 style="color: white; font-size: 1.5rem; font-weight: 800; margin-bottom: 10px; font-family: var(--font-num);">Treino Expirado</h2>
    <p style="color: #94a3b8; margin-bottom: 30px; font-size: 0.9rem;">O per√≠odo do seu acompanhamento encerrou. Renove para continuar evoluindo.</p>
    <a href="https://wa.me/5541997222664?text=Oi%20Benai,%20quero%20renovar%20a%20consultoria!" class="btn-send-fb">
        <i class="fa-brands fa-whatsapp"></i> RENOVAR PLANO
    </a>
</div>

<div class="container">
    <div class="header">
        <div class="h-info">
            <div class="h-brand" id="secretTrigger" onclick="toggleAdmin()">BENAI BERNARDO</div>
            <div class="h-sub-brand">CONSULTORIA DE TREINAMENTO</div>
            <div class="h-title" id="sName">Ol√°!</div>
            <div class="h-sub" id="sFocus">Carregando...</div>
            <div class="h-dates">
                <div class="h-date-badge" id="date-start-badge"><i class="fa-solid fa-calendar"></i> In√≠cio: <span id="val-start">--/--</span></div>
                <div class="h-date-badge" id="date-end-badge"><i class="fa-solid fa-hourglass-half"></i> Vence: <span id="val-end">--/--</span></div>
            </div>
        </div>
        <div class="h-actions">
            <a href="https://wa.me/5541997222664?text=Oi%20Benai,%20preciso%20de%20ajuda%20com%20o%20treino." target="_blank" class="h-btn btn-wa" title="Falar com Benai">
                <i class="fa-brands fa-whatsapp"></i>
            </a>
            <button class="h-btn" onclick="toggleTheme()" title="Modo Escuro/Claro">
                <i class="fa-solid fa-moon" id="theme-icon"></i>
            </button>
            <button id="adminBtn" class="h-btn btn-restore" onclick="adminTriggerRestore()" title="Ver Relat√≥rio do Aluno">
                <i class="fa-solid fa-cloud-arrow-up"></i>
            </button>
            <input type="file" id="adminRestoreFile" hidden onchange="adminLoadFile(this)">
        </div>
    </div>

    <!-- TAB 1: WORKOUT -->
    <div id="tab-1" class="tab-pane content">
        <!-- WHATSAPP & PDF HELP -->
        <div style="display:flex; gap:10px; margin-bottom:20px;">
            <a href="https://wa.me/5541997222664?text=Oi%20Benai,%20duvida%20sobre%20o%20treino." target="_blank" class="btn-send-fb" style="flex:1; padding:10px; font-size:0.8rem; box-shadow:none;">
                <i class="fa-brands fa-whatsapp"></i> D√öVIDAS?
            </a>
            <button class="btn-send-fb" style="flex:1; padding:10px; font-size:0.8rem; background:var(--primary); box-shadow:none;" onclick="downloadPDF()">
                <i class="fa-solid fa-file-pdf"></i> BAIXAR PDF
            </button>
        </div>

        <div id="wList">
            <div class="loading-state">
                <i class="fa-solid fa-circle-notch spin"></i>
                <div>Buscando seu treino...</div>
            </div>
        </div>
        <div style="height: 20px;"></div>
    </div>

    <!-- TAB 2: METHOD (DEFAULT) -->
    <div id="tab-2" class="tab-pane active content">
        <div style="margin-bottom:30px;">
            <div class="modern-title"><i class="fa-solid fa-bullseye"></i> L√≥gica do Treino</div>
            <div class="logic-card" id="logicTopics"></div>
        </div>
        
        <div>
            <div class="modern-title"><i class="fa-solid fa-layer-group"></i> Pilares do Treinamento</div>
            <div id="pillarsContainer" class="method-grid">
                <!-- PILLARS RENDERED VIA JS -->
            </div>
        </div>
    </div>

    <!-- TAB 3: FEEDBACK -->
    <div id="tab-3" class="tab-pane content">
        <div class="feedback-box">
            <i class="fa-solid fa-quote-left" style="font-size:2rem; color:var(--border); margin-bottom:15px;"></i>
            <div class="fb-title">Avalie a Consultoria</div>
            <div class="fb-sub">Sua evolu√ß√£o e satisfa√ß√£o s√£o meu foco.</div>
            
            <div class="stars">
                <i class="fa-solid fa-star star" onclick="rate(1)"></i>
                <i class="fa-solid fa-star star" onclick="rate(2)"></i>
                <i class="fa-solid fa-star star" onclick="rate(3)"></i>
                <i class="fa-solid fa-star star" onclick="rate(4)"></i>
                <i class="fa-solid fa-star star" onclick="rate(5)"></i>
            </div>

            <div class="pse-container">
                <div class="pse-label">
                    <span>N√çVEL DE ESFOR√áO (PSE)</span>
                    <span class="pse-val" id="pseVal">8</span>
                </div>
                <input type="range" min="1" max="10" value="8" class="pse-range" id="pseInput" oninput="document.getElementById('pseVal').innerText=this.value">
                <div style="display:flex; justify-content:space-between; font-size:0.65rem; color:var(--text-muted); margin-top:5px; font-weight:700;">
                    <span>LEVE</span><span>MODERADO</span><span>EXAUST√ÉO</span>
                </div>
            </div>

            <textarea id="fbComment" class="fb-area" rows="4" placeholder="Como est√° se sentindo com o acompanhamento? O que melhorou na sua rotina/corpo?"></textarea>
            <button class="btn-send-fb" onclick="sendWhatsAppFeedback()"><i class="fa-brands fa-whatsapp"></i> ENVIAR NO WHATSAPP</button>
        </div>
    </div>
</div>

<div class="nav">
    <div class="nav-btn" onclick="go(1)"><i class="fa-solid fa-dumbbell"></i> TREINO</div>
    <div class="nav-btn active" onclick="go(2)"><i class="fa-solid fa-book-open"></i> M√âTODO</div>
    <div class="nav-btn" onclick="go(3)"><i class="fa-solid fa-star"></i> FEEDBACK</div>
</div>

<div id="timer" class="timer-ov">
    <div style="font-weight:700; letter-spacing:3px; opacity:0.7;">DESCANSO</div>
    <div class="t-disp" id="tDisp">00:00</div>
    <div class="t-row"><button class="t-btn" onclick="addT(-10)">-10</button><button class="t-btn" onclick="addT(10)">+10</button></div>
    <button onclick="closeT()" style="margin-top:40px; background:white; color:var(--primary); border:none; padding:12px 40px; border-radius:30px; font-weight:800; font-size:1rem;">VOLTAR</button>
</div>

<div id="print-area"></div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        initTheme();
        init();
    });
    
    let tmr, sec=0, currentData=null, rating=5, adminClicks=0;

    const PILLARS = {
        'Muscula√ß√£o': [
            {t:"1. Dor Boa vs. Dor Ruim", d:"Queima√ß√£o muscular √© sinal verde (evolu√ß√£o). Pontada aguda na articula√ß√£o √© SINAL VERMELHO. Pare e ajuste.", i:"triangle-exclamation", c:"danger"},
            {t:"2. N√£o vire um Baiacu", d:"N√£o prenda o ar ficando roxo! Solte o ar (assopre a vela) quando fizer a for√ßa. Oxig√™nio √© energia.", i:"wind", c:"blue"},
            {t:"3. Postura de Super-her√≥i", d:"Estufe o peito e trave o abd√¥men (como se fosse levar um soco). Essa armadura protege sua coluna.", i:"shield-halved", c:"purple"},
            {t:"4. Quem manda √© voc√™", d:"N√£o deixe o peso despencar. Des√ßa em c√¢mera lenta (3 seg) e suba com explos√£o. Domine a carga.", i:"stopwatch", c:"cyan"},
            {t:"5. O Descanso √© Sagrado", d:"Respeite o timer. Menos descanso atrapalha a for√ßa, mais descanso esfria o corpo. Foco total.", i:"hourglass-half", c:"orange"},
            {t:"6. Intensidade de Verdade", d:"Se terminou a s√©rie mexendo no celular, estava leve. O treino bom √© aquele que a gente faz careta no final.", i:"gauge-high", c:"green"}
        ],
        'Calistenia': [
            {t:"1. Dor vs. Desconforto", d:"O corpo vai tremer, √© normal. Mas fisgada no ombro ou cotovelo n√£o √©. Suas articula√ß√µes s√£o ouro, cuide delas.", i:"triangle-exclamation", c:"danger"},
            {t:"2. Corpo de Pedra (Tens√£o)", d:"Contraia tudo! Bumbum duro, ponta de p√© esticada, barriga travada. Quanto mais r√≠gido, mais leve voc√™ fica.", i:"link", c:"purple"},
            {t:"3. Amplitude √© Rei", d:"Estique o bra√ßo todo! Encoste o peito no ch√£o! Meia repeti√ß√£o d√° meio resultado. Busque a perfei√ß√£o.", i:"maximize", c:"cyan"},
            {t:"4. Ombros Longe da Orelha", d:"N√£o deixe os ombros subirem. Empurre o ch√£o com vontade e mantenha as costas firmes.", i:"bone", c:"orange"},
            {t:"5. Controle a Negativa", d:"A gravidade n√£o pode te vencer. Segure a volta do movimento. √â isso que te prepara para movimentos avan√ßados.", i:"arrow-down", c:"green"},
            {t:"6. Qualidade > Quantidade", d:"5 barras perfeitas valem mais que 20 barras 'minhoquinha'. Se a forma quebrou, a s√©rie acabou.", i:"award", c:"blue"}
        ]
    };

    function initTheme() {
        const theme = localStorage.getItem('theme');
        if(theme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            document.getElementById('theme-icon').className = 'fa-solid fa-sun';
        }
    }

    function toggleTheme() {
        const root = document.documentElement;
        const icon = document.getElementById('theme-icon');
        if(root.hasAttribute('data-theme')) {
            root.removeAttribute('data-theme');
            localStorage.setItem('theme', 'light');
            icon.className = 'fa-solid fa-moon';
        } else {
            root.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            icon.className = 'fa-solid fa-sun';
        }
    }

    async function init() {
        const p = new URLSearchParams(window.location.search);
        const id = p.get('id');
        const dataOld = p.get('data'); 

        if(id) {
            try {
                const req = await fetch(`https://api.github.com/gists/${id}`);
                if(!req.ok) throw new Error("Treino n√£o encontrado");
                
                const json = await req.json();
                const content = json.files["treino.json"].content;
                currentData = JSON.parse(content);
                
                localStorage.setItem('cached_workout', JSON.stringify(currentData));

                processData(currentData);
            } catch(e) {
                const cached = localStorage.getItem('cached_workout');
                if(cached) {
                    currentData = JSON.parse(cached);
                    processData(currentData, true);
                } else {
                    document.getElementById('wList').innerHTML = `<div style="text-align:center; padding:40px; color:#ef4444;"><i class="fa-solid fa-triangle-exclamation" style="font-size:2rem;margin-bottom:10px;"></i><br>Erro ao baixar treino.<br><small>Sem internet e sem cache.</small></div>`;
                }
            }
        } else if (dataOld) {
            try {
                const json = LZString.decompressFromEncodedURIComponent(dataOld);
                currentData = JSON.parse(json);
                processData(currentData);
            } catch(e) { alert("Link antigo corrompido."); }
        } else {
            const cached = localStorage.getItem('cached_workout');
            if(cached) {
                currentData = JSON.parse(cached);
                processData(currentData);
            } else {
                document.getElementById('wList').innerHTML = '<div style="text-align:center; padding:40px; color:#9ca3af;">Nenhum treino encontrado.</div>';
            }
        }
    }

    function processData(data, isOffline = false) {
        // Handle Dates Display
        const formatDate = (isoStr) => {
            if(!isoStr) return '--/--';
            const parts = isoStr.split('-');
            return `${parts[2]}/${parts[1]}`;
        }

        const start = formatDate(data.startDate);
        const end = formatDate(data.expiryDate);
        
        document.getElementById('val-start').innerText = start;
        document.getElementById('val-end').innerText = end;

        if(data.expiryDate) {
            const now = new Date();
            const exp = new Date(data.expiryDate);
            const diffTime = exp - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            const badge = document.getElementById('date-end-badge');
            if(diffTime < 0) {
                document.getElementById('blocked-ov').style.display = 'flex';
                return;
            } else if(diffDays <= 7) {
                badge.classList.add('urgent');
            }
        }

        render(data);
        restoreSession(); 
        rate(5);
        
        if(isOffline) {
            const list = document.getElementById('wList');
            const warning = document.createElement('div');
            warning.innerHTML = '<div style="background:#fefce8; color:#854d0e; padding:10px; text-align:center; font-size:12px; font-weight:bold; border-bottom:1px solid #fef9c3;">Modo Offline (√öltima vers√£o salva)</div>';
            list.prepend(warning);
        }
    }

    function render(data) {
        document.getElementById('sName').innerText = `Ol√°, ${data.name}!`;
        document.getElementById('sFocus').innerText = data.focus;
        
        // LOGIC RENDERING (COLORFUL)
        const logicContainer = document.getElementById('logicTopics');
        logicContainer.innerHTML = '';
        let topics = [];
        if(typeof data.logic === 'string') topics = data.logic.split('\n').filter(t => t.trim() !== '');
        else if(Array.isArray(data.logic)) topics = data.logic;
        
        if(topics.length === 0) topics = ["Foco na execu√ß√£o."];
        
        topics.forEach((topic, i) => { 
            const colorClass = `c-${i % 6}`;
            logicContainer.innerHTML += `<div class="logic-item ${colorClass}"><div class="logic-icon"><i class="fa-solid fa-check"></i></div><div class="logic-text">${topic}</div></div>`; 
        });

        // PILLARS RENDERING
        const methodology = data.methodology || 'Muscula√ß√£o';
        const pillars = PILLARS[methodology] || PILLARS['Muscula√ß√£o'];
        const pCont = document.getElementById('pillarsContainer');
        pCont.innerHTML = '';
        pillars.forEach(p => {
            pCont.innerHTML += `
            <div class="method-card mc-${p.c || 'blue'}">
                <div class="mc-icon"><i class="fa-solid fa-${p.i || 'star'}"></i></div>
                <div class="mc-content">
                    <div class="mc-title">${p.t}</div>
                    <div class="mc-text">${p.d}</div>
                </div>
            </div>`;
        });

        const list = document.getElementById('wList');
        const warning = list.querySelector('div[style*="background:#fefce8"]');
        list.innerHTML = ''; 
        if(warning) list.appendChild(warning);
        
        if(data.blocks) {
            data.blocks.forEach((b, bIdx) => {
                let itemsHtml = '';
                b.items.forEach((item, iIdx) => {
                    let showTimer = true;
                    if(b.type === 'biset' || b.type === 'triset') {
                        if(iIdx < b.items.length - 1) showTimer = false;
                    }
                    itemsHtml += mkRow(bIdx, iIdx, item, showTimer);
                });
                
                let wrapper = '';
                // Collapsible logic wrapper
                const collapseId = `block-${bIdx}`;
                
                // Header with Chevron and closed state logic
                const header = `<div class="section-header">
                    <div style="flex:1" onclick="toggleBlock('${collapseId}')">
                        <h3 class="section-title">${b.name}</h3>
                        ${b.details ? `<div class="block-desc">${b.details}</div>` : ''}
                    </div>
                    <div onclick="toggleBlockItems(${bIdx})" class="block-done-btn" id="btn-blk-${bIdx}" title="Marcar todos"><i class="fa-solid fa-check-double"></i></div>
                    <i class="fas fa-chevron-down toggle-icon" onclick="toggleBlock('${collapseId}')"></i>
                </div>`;

                // Add "is-closed" by default to wrapper div
                if(b.type === 'biset') wrapper = `<div class="biset-wrap is-closed">${header}<div class="biset-lbl">BI-SET</div><div id="${collapseId}" class="block-content-area">${itemsHtml}</div></div>`;
                else if(b.type === 'triset') wrapper = `<div class="triset-wrap is-closed">${header}<div class="triset-lbl">TRI-SET</div><div id="${collapseId}" class="block-content-area">${itemsHtml}</div></div>`;
                else wrapper = `<div class="normal-wrap is-closed">${header}<div id="${collapseId}" class="block-content-area">${itemsHtml}</div></div>`; 

                list.innerHTML += wrapper;
            });
        }
    }

    function toggleBlock(id) {
        const content = document.getElementById(id);
        const parent = content.parentElement;
        parent.classList.toggle('is-closed');
    }

    function toggleBlockItems(bIdx) {
        const block = currentData.blocks[bIdx];
        if(!block) return;
        
        // Check if any is NOT done to decide whether to check all or uncheck all
        let allDone = true;
        block.items.forEach((_, iIdx) => {
            const uid = `${bIdx}-${iIdx}`;
            if(!localStorage.getItem('chk_'+uid)) allDone = false;
        });

        const newState = !allDone; // If not all done, mark all done. If all done, unmark all.

        block.items.forEach((_, iIdx) => {
            const uid = `${bIdx}-${iIdx}`;
            const row = document.getElementById('r-'+uid);
            
            if(newState) {
                if(row && !row.classList.contains('done')) {
                    row.classList.add('done');
                    localStorage.setItem('chk_'+uid, '1');
                }
            } else {
                if(row && row.classList.contains('done')) {
                    row.classList.remove('done');
                    localStorage.removeItem('chk_'+uid);
                }
            }
        });
        
        if(navigator.vibrate) navigator.vibrate(50);
        
        // Update header btn state visual
        const btn = document.getElementById(`btn-blk-${bIdx}`);
        if(newState) btn.classList.add('active'); else btn.classList.remove('active');
    }

    function mkRow(bIdx, iIdx, item, showTimer = true) {
        const uid = `${bIdx}-${iIdx}`;
        const rest = parseInt(item.rest) || 60;
        
        let methodClass = 'm-Normal';
        const m = (item.method || 'normal').toLowerCase();

        if(m === 'drop') methodClass = 'm-Drop';
        if(m === 'rnp' || m === 'rest') methodClass = 'm-RNP';
        if(m === 'iso') methodClass = 'm-Iso';
        if(m === 'pyr') methodClass = 'm-Pyr';

        let titleHtml = '';
        if(item.link && item.link.length > 5) {
            titleHtml = `<a href="${item.link}" target="_blank" class="ex-title has-video">${item.name} <div class="play-badge"><i class="fa-solid fa-play"></i> V√çDEO</div></a>`;
        } else {
            titleHtml = `<span class="ex-title">${item.name}</span>`;
        }

        // --- STAT BOXES LOGIC ---
        let sVal = item.sets; let sLbl = "S√©ries";
        let rVal = item.reps; let rLbl = "Reps";
        
        if(m === 'iso') { rVal = `${item.reps}s`; rLbl = "Isometria"; sVal = item.isoReps || 1; }
        if(m === 'drop') { rLbl = "Reps + Drop"; }

        let statsHtml = `
            <div class="stat-box">
                <span class="stat-val">${sVal}</span>
                <span class="stat-lbl">${sLbl}</span>
            </div>
            <div class="stat-box">
                <span class="stat-val">${rVal}</span>
                <span class="stat-lbl">${rLbl}</span>
            </div>
        `;

        if(showTimer) {
            statsHtml += `
            <div class="stat-box clickable" onclick="openT(${rest})">
                <span class="stat-val"><i class="fa-solid fa-stopwatch"></i></span>
                <span class="stat-lbl">${item.rest}</span>
            </div>`;
        } else {
             statsHtml += `
            <div class="stat-box" style="opacity:0.5">
                <span class="stat-val">-</span>
                <span class="stat-lbl">Sem Pausa</span>
            </div>`;
        }

        // Special Badges append to Grid or Title? Let's put distinct features in header or obs
        let badges = "";
        if(m === 'drop' && item.drops) badges += `<div class="obs-box" style="margin-top:0; margin-bottom:8px; background:#fef2f2; border-color:#ef4444; color:#991b1b;"><i class="fa-solid fa-fire"></i> +${item.drops} Drops (Reduz carga, sem descanso)</div>`;
        if((m === 'rnp' || m === 'rest')) {
             let t = item.rnpRest || '10'; 
             badges += `<div class="obs-box" style="margin-top:0; margin-bottom:8px; background:#fff7ed; border-color:#f97316; color:#9a3412;"><i class="fa-solid fa-hourglass-start"></i> Rest-Pause: Falha + ${t}s + Falha</div>`;
        }

        return `
            <div class="row ${methodClass}" id="r-${uid}" data-name="${item.name}">
                <div class="row-header">
                    ${titleHtml}
                    <div class="row-action">
                        <button class="check-btn-lg" onclick="toggle('${uid}')"><i class="fa-solid fa-check"></i></button>
                    </div>
                </div>
                
                ${badges}

                <div class="stats-grid">
                    ${statsHtml}
                </div>

                <div style="display:flex; justify-content:space-between; align-items:center;">
                     <input type="number" id="load-${uid}" class="load-inp" placeholder="kg" onchange="saveLoad('${uid}', this.value)">
                     ${item.obs ? `<div class="obs-box" style="flex:1; margin-top:0; margin-left:10px;"><i class="fa-solid fa-circle-info mt-0.5"></i> ${item.obs}</div>` : ''}
                </div>
            </div>
        `;
    }

    function toggle(uid) { const r=document.getElementById('r-'+uid); if(r.classList.contains('done')){r.classList.remove('done');localStorage.removeItem('chk_'+uid);}else{r.classList.add('done');localStorage.setItem('chk_'+uid,'1');if(navigator.vibrate)navigator.vibrate(50);} }
    function saveLoad(uid,v) { localStorage.setItem('load_'+uid,v); }
    
    function restoreSession() { 
        document.querySelectorAll('.row').forEach(r=>{
            const uid=r.id.replace('r-','');
            if(localStorage.getItem('chk_'+uid)) r.classList.add('done');
            const l=localStorage.getItem('load_'+uid);
            if(l)document.getElementById('load-'+uid).value=l;
        });
        
        // Update block buttons
        currentData.blocks.forEach((_, bIdx) => {
             let allDone = true;
             // Naive check based on DOM might fail if block closed? No, IDs persist.
             // Better to check data logic
             let hasItems = false;
             currentData.blocks[bIdx].items.forEach((_, iIdx) => {
                 hasItems = true;
                 const uid = `${bIdx}-${iIdx}`;
                 if(!localStorage.getItem('chk_'+uid)) allDone = false;
             });
             if(hasItems && allDone) {
                 const btn = document.getElementById(`btn-blk-${bIdx}`);
                 if(btn) btn.classList.add('active');
             }
        });
    }

    function go(n) { document.querySelectorAll('.tab-pane').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.nav-btn').forEach(e=>e.classList.remove('active'));document.getElementById('tab-'+n).classList.add('active');document.querySelectorAll('.nav-btn')[n-1].classList.add('active');window.scrollTo(0,0); }
    function openT(s) { sec=s;updT();document.getElementById('timer').style.display='flex';if(tmr)clearInterval(tmr);tmr=setInterval(()=>{sec--;updT();if(sec<=0){clearInterval(tmr);navigator.vibrate([200,100,200]);}},1000); }
    function addT(v){sec+=v;updT();} function closeT(){document.getElementById('timer').style.display='none';clearInterval(tmr);} function updT(){let m=Math.floor(sec/60),s=sec%60;if(sec<0){m=0;s=0;}document.getElementById('tDisp').innerText=`${m}:${s<10?'0'+s:s}`;}
    
    // ADMIN RESTORE (Secreto: toque 5x no titulo "Benai App" no header)
    function toggleAdmin(){adminClicks++;if(adminClicks>=5){document.getElementById('adminBtn').style.display='flex';alert("Modo Admin Ativado");adminClicks=0;}}
    
    function rate(n){rating=n;document.querySelectorAll('.star').forEach((s,i)=>{if(i<n)s.classList.add('filled');else s.classList.remove('filled');});}
    
    function sendWhatsAppFeedback() {
        if(!currentData) return alert("Erro: Treino n√£o carregado.");
        const c = document.getElementById('fbComment').value;
        const pse = document.getElementById('pseInput').value;
        const n = currentData.name || "Aluno";
        
        const msg = `*Feedback Consultoria Benai*\n\nüë§ Aluno: ${n}\n‚≠ê Nota: ${rating}/5\nüî• Esfor√ßo (PSE): ${pse}/10\nüí¨ Coment√°rio: ${c || 'Sem coment√°rio.'}\n\n_Enviado via Benai App_`;
        
        // WhatsApp URL
        const url = `https://wa.me/5541997222664?text=${encodeURIComponent(msg)}`;
        window.open(url, '_blank');
    }
    
    function downloadPDF() {
        if(!currentData) return alert("Erro: Treino n√£o carregado.");
        
        // Check for library
        if(typeof html2pdf === 'undefined') {
            return alert("‚ö†Ô∏è O download de PDF requer internet para carregar o gerador.\nConecte-se e recarregue a p√°gina.");
        }

        const area = document.getElementById('print-area');
        
        const formatDate = (iso) => { if(!iso) return '--'; const p = iso.split('-'); return `${p[2]}/${p[1]}/${p[0]}`; }
        
        const logicHTML = (currentData.logic||[]).map(l => `<div style="margin-bottom:5px;">‚Ä¢ ${l}</div>`).join('');
        const pillars = PILLARS[currentData.methodology] || PILLARS['Muscula√ß√£o'];
        const pillarsHTML = pillars.map(p => `
            <div style="background:#f0f9ff; padding:10px; border-radius:8px; margin-bottom:5px; border-left:4px solid #00A8E8; font-size:10px;">
                <div style="font-weight:800; color:#001F5B; margin-bottom:2px;">${p.t}</div>
                <div style="color:#555;">${p.d}</div>
            </div>
        `).join('');

        let blocksHTML = '';
        currentData.blocks.forEach(b => {
            let items = b.items.map(i => `
                <div style="display:flex; justify-content:space-between; padding:6px; border-bottom:1px solid #eee; align-items:center;">
                    <div style="width:45%;">
                        <div style="font-weight:bold; color:#1e293b;">${i.name}</div>
                        ${i.link ? `<a href="${i.link}" style="color:#00A8E8; font-size:9px; text-decoration:none;" target="_blank">‚ñ∫ VER V√çDEO</a>` : ''}
                    </div>
                    <div style="width:15%; text-align:center;">${i.sets}x ${i.reps}</div>
                    <div style="width:15%; text-align:center;">${i.rest}</div>
                    <div style="width:25%; text-align:right; color:#64748b; font-size:10px;">${i.method} ${i.obs ? `<br><span style="color:#d97706">${i.obs}</span>` : ''}</div>
                </div>
            `).join('');
            
            blocksHTML += `
            <div style="margin-bottom:20px; break-inside:avoid; border:1px solid #eee; border-radius:8px; overflow:hidden;">
                <div style="background:#001F5B; color:white; padding:8px 15px; font-weight:bold; font-size:12px; display:flex; justify-content:space-between;">
                    <span>${b.name}</span>
                    <span style="opacity:0.8; font-size:10px;">${b.type}</span>
                </div>
                ${b.details ? `<div style="background:#f8fafc; color:#64748b; padding:5px 15px; font-size:10px; border-bottom:1px solid #eee; font-style:italic;">${b.details}</div>` : ''}
                <div style="padding:10px; background:#f9fafb; font-size:9px; font-weight:800; color:#94a3b8; text-transform:uppercase; display:flex; justify-content:space-between;">
                    <div style="width:45%">Exerc√≠cio</div>
                    <div style="width:15%; text-align:center;">S√©ries/Reps</div>
                    <div style="width:15%; text-align:center;">Intervalo</div>
                    <div style="width:25%; text-align:right;">Obs/M√©todo</div>
                </div>
                <div style="padding:0 10px 10px;">${items}</div>
            </div>`;
        });

        area.innerHTML = `
            <div style="font-family:sans-serif; padding:20px; color:#1e293b;">
                <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:3px solid #001F5B; padding-bottom:15px; margin-bottom:20px;">
                    <div>
                        <h1 style="color:#001F5B; margin:0; font-size:24px; line-height:1;">BENAI BERNARDO</h1>
                        <div style="color:#00A8E8; font-weight:bold; letter-spacing:2px; font-size:10px; margin-top:5px;">CONSULTORIA DE TREINAMENTO</div>
                        <a href="https://wa.me/5541997222664" target="_blank" style="display:inline-block; margin-top:10px; background:#25D366; color:white; padding:5px 10px; border-radius:4px; text-decoration:none; font-size:10px; font-weight:bold;">WHATSAPP: (41) 99722-2664</a>
                    </div>
                    <div style="text-align:right; font-size:10px;">
                        <div>ALUNO: <b>${currentData.name}</b></div>
                        <div>OBJETIVO: ${currentData.focus}</div>
                        <div>VALIDADE: ${formatDate(currentData.expiryDate)}</div>
                    </div>
                </div>
                
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-bottom:20px;">
                    <div>
                        <h3 style="background:#001F5B; color:white; padding:5px 10px; font-size:12px; border-radius:4px; margin-top:0;">L√ìGICA DO TREINO</h3>
                        <div style="font-size:11px;">${logicHTML}</div>
                    </div>
                    <div>
                        <h3 style="background:#00A8E8; color:white; padding:5px 10px; font-size:12px; border-radius:4px; margin-top:0;">PILARES DO TREINAMENTO</h3>
                        ${pillarsHTML}
                    </div>
                </div>
                
                ${blocksHTML}
            </div>
        `;
        area.style.display = 'block';
        html2pdf(area, { margin: 5, filename: `Treino_${currentData.name}.pdf`, image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' } }).then(() => area.style.display = 'none');
    }

    function adminTriggerRestore(){document.getElementById('adminRestoreFile').click();}
    function adminLoadFile(i){const f=i.files[0];if(!f)return;const r=new FileReader();r.onload=e=>{try{const j=JSON.parse(e.target.result);if(j.data){Object.keys(j.data).forEach(u=>{const it=j.data[u],r=document.getElementById('r-'+u);if(r){if(it.done)r.classList.add('done');if(it.load)document.getElementById('load-'+u).value=it.load;}});if(j.feedback)alert(`üìù NOTA: ${j.feedback.rating}/5\n"${j.feedback.comment}"`);else alert("Dados restaurados!");}}catch(x){alert("Erro ao ler arquivo.");}};r.readAsText(f);}
</script>
</body>
</html>
