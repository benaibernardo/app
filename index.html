<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Benai App | Hub Central</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-dark: #020617;
            --card-blue: rgba(30, 41, 59, 0.7);
            --card-hover: rgba(30, 58, 138, 0.8);
            --cyan: #00aeef;
            --text-main: #f1f5f9;
            --text-dim: #94a3b8;
            --success: #10b981;
            --danger: #ef4444;

            /* Cores de ícones */
            --icon-tracker: #22d3ee;
            --icon-fin: #4ade80;
            --icon-card: #fbbf24;
            --icon-diet: #f87171;
            --icon-coach: #a78bfa;
            --icon-work: #6366f1;
            --icon-prime: #ffd700;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(-45deg, #020617, #0f172a, #1e1b4b, #020617);
            background-size: 400% 400%;
            animation: gradientMove 15s ease infinite;
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- BLOQUEIO --- */
        #gatekeeper {
            position: fixed; inset: 0; background: var(--bg-dark);
            z-index: 10000; display: flex; align-items: center; justify-content: center;
        }
        .pin-card {
            background: #1e293b; padding: 2.5rem; border-radius: 28px;
            width: 90%; max-width: 360px; text-align: center; border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        .pin-input {
            width: 100%; padding: 1rem; font-size: 1.5rem; text-align: center;
            background: rgba(0,0,0,0.3); border: 2px solid var(--cyan);
            border-radius: 15px; color: white; margin-top: 1.5rem; outline: none;
        }

        /* --- HEADER CENTRALIZADO --- */
        header {
            padding: 3rem 1.5rem 2rem;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            position: relative;
        }
        .logo-text { font-family: 'Poppins', sans-serif; font-weight: 800; font-size: 2.2rem; line-height: 1; margin-bottom: 8px; }
        .logo-text span { color: var(--cyan); }
        
        .date-text { font-size: 0.9rem; color: var(--text-dim); text-transform: capitalize; margin-bottom: 15px; }
        
        .status-badge {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 5px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: 600;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
        }
        .dot { width: 8px; height: 8px; border-radius: 50%; }
        .dot-online { background: var(--success); box-shadow: 0 0 8px var(--success); }
        .dot-offline { background: var(--danger); }

        .btn-config-float {
            position: absolute; right: 1.5rem; top: 3.5rem;
            background: var(--card-blue); border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 10px; border-radius: 12px; cursor: pointer; backdrop-filter: blur(10px);
        }

        /* --- GRID --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 1.5rem 5rem;
            width: 100%;
        }
        section { margin-bottom: 2.5rem; }
        .section-label { 
            font-family: 'Poppins', sans-serif; font-size: 0.75rem; text-transform: uppercase; 
            letter-spacing: 2px; color: var(--cyan); margin-bottom: 1rem; display: block; text-align: center;
        }
        .app-grid { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
            gap: 1.2rem; justify-content: center;
        }
        
        .app-card {
            background: var(--card-blue); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px; padding: 1.5rem; text-decoration: none; transition: 0.3s;
            display: flex; flex-direction: column; align-items: center; text-align: center;
            backdrop-filter: blur(10px);
        }
        .app-card:hover { transform: translateY(-8px); background: var(--card-hover); border-color: var(--cyan); }
        .icon-box { width: 50px; height: 50px; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; background: rgba(0,0,0,0.2); }
        .app-card h4 { font-family: 'Poppins', sans-serif; font-size: 0.95rem; color: white; margin-bottom: 4px; }
        .app-card p { font-size: 0.7rem; color: var(--text-dim); line-height: 1.3; }

        /* --- MODAL --- */
        .modal { display: none; position: fixed; inset: 0; background: rgba(2, 6, 23, 0.95); z-index: 11000; align-items: center; justify-content: center; padding: 1.5rem; backdrop-filter: blur(5px); }
        .modal-box { background: #1e293b; width: 100%; max-width: 480px; border-radius: 32px; padding: 2rem; border: 1px solid rgba(255,255,255,0.1); }
        .config-item { background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 20px; margin-bottom: 1rem; border: 1px solid rgba(255,255,255,0.05); }
        .config-item label { display: block; font-size: 0.8rem; font-weight: 600; color: var(--cyan); margin-bottom: 4px; }
        .config-item small { display: block; font-size: 0.65rem; color: var(--text-dim); margin-bottom: 10px; line-height: 1.2; }
        .config-input { width: 100%; background: var(--bg-dark); border: 1px solid rgba(255,255,255,0.1); padding: 0.8rem; border-radius: 10px; color: white; font-family: monospace; font-size: 0.8rem; }
        
        .btn-action { width: 100%; padding: 0.8rem; border-radius: 12px; border: none; font-weight: 700; cursor: pointer; transition: 0.3s; margin-top: 8px; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.8rem; }
        .btn-save { background: var(--cyan); color: var(--bg-dark); margin-top: 15px; }
        .btn-outline { background: transparent; border: 1px solid rgba(255,255,255,0.1); color: var(--text-main); }

        @media (max-width: 480px) { 
            .app-grid { grid-template-columns: repeat(2, 1fr); gap: 0.8rem; } 
            .btn-config-float { position: static; margin: 10px auto; display: block; width: fit-content; }
        }
    </style>
</head>
<body>

    <!-- BLOQUEIO -->
    <div id="gatekeeper">
        <div class="pin-card">
            <h2 style="font-family: 'Poppins'; color: var(--cyan)">BENAI HUB</h2>
            <p style="font-size: 0.8rem; color: var(--text-dim)">Insira seu PIN de segurança</p>
            <input type="password" id="pinInput" class="pin-input" maxlength="8" placeholder="••••••••" autofocus>
        </div>
    </div>

    <header>
        <div class="logo-area">
            <div class="logo-text">BENAI <span>APP</span></div>
            <div id="currentDate" class="date-text">...</div>
        </div>
        
        <div id="tokenStatus" class="status-badge">
            <div id="statusDot" class="dot dot-offline"></div>
            <span id="statusText">Nuvem Desconectada</span>
        </div>

        <button class="btn-config-float" onclick="toggleModal(true)">
            <i data-lucide="settings-2"></i>
        </button>
    </header>

    <main class="container">
        <!-- PESSOAL -->
        <section>
            <span class="section-label">Vida & Finanças</span>
            <div class="app-grid">
                <a href="tracker.html" class="app-card">
                    <div class="icon-box"><i data-lucide="check-circle" style="color: var(--icon-tracker)"></i></div>
                    <h4>Tracker</h4>
                    <p>Metas e Hábitos</p>
                </a>
                <a href="financeiro.html" class="app-card">
                    <div class="icon-box"><i data-lucide="pie-chart" style="color: var(--icon-fin)"></i></div>
                    <h4>Financeiro</h4>
                    <p>Controle de Gastos</p>
                </a>
                <a href="cartao.html" class="app-card">
                    <div class="icon-box"><i data-lucide="credit-card" style="color: var(--icon-card)"></i></div>
                    <h4>Cartão C6</h4>
                    <p>Faturas e Limites</p>
                </a>
                <a href="dieta.html" class="app-card">
                    <div class="icon-box"><i data-lucide="apple" style="color: var(--icon-diet)"></i></div>
                    <h4>Dieta</h4>
                    <p>Plano Alimentar</p>
                </a>
            </div>
        </section>

        <!-- CONSULTORIA -->
        <section>
            <span class="section-label">Consultoria Benai</span>
            <div class="app-grid">
                <a href="gerador.html" class="app-card">
                    <div class="icon-box"><i data-lucide="dumbbell" style="color: var(--icon-coach)"></i></div>
                    <h4>Gerador</h4>
                    <p>Criação de Treinos</p>
                </a>
                <a href="aluno.html" class="app-card">
                    <div class="icon-box"><i data-lucide="users" style="color: var(--icon-work)"></i></div>
                    <h4>Portal Aluno</h4>
                    <p>Área do Cliente</p>
                </a>
            </div>
        </section>

        <!-- TRABALHO -->
        <section>
            <span class="section-label">Gestão Studio</span>
            <div class="app-grid">
                <a href="fit_studio.html" class="app-card">
                    <div class="icon-box"><i data-lucide="layout" style="color: var(--icon-work)"></i></div>
                    <h4>Fit Studio</h4>
                    <p>Gestão de Sala</p>
                </a>
                <a href="prime.html" class="app-card">
                    <div class="icon-box"><i data-lucide="gem" style="color: var(--icon-prime)"></i></div>
                    <h4>Membros Prime</h4>
                    <p>Status Premium</p>
                </a>
            </div>
        </section>
    </main>

    <!-- CONFIGURAÇÕES -->
    <div id="configModal" class="modal">
        <div class="modal-box">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                <h2 style="font-family:'Poppins';">Painel de Controle</h2>
                <i data-lucide="x" onclick="toggleModal(false)" style="cursor:pointer; color:var(--text-dim)"></i>
            </div>

            <div class="config-item">
                <label>Sincronização Cloud</label>
                <small>Token GitHub Gist para backup automático entre dispositivos.</small>
                <input type="password" id="globalToken" class="config-input" placeholder="ghp_xxxxxx">
            </div>

            <div class="config-item">
                <label>Banco de Dados</label>
                <small>Importe ou exporte o arquivo completo do Benai App (.json).</small>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button class="btn-action btn-outline" onclick="exportBackup()"><i data-lucide="download" style="width:14px"></i> Exportar</button>
                    <button class="btn-action btn-outline" onclick="document.getElementById('importInput').click()"><i data-lucide="upload" style="width:14px"></i> Importar</button>
                </div>
                <input type="file" id="importInput" hidden accept=".json" onchange="importBackup(event)">
            </div>

            <button class="btn-action btn-save" onclick="saveSettings()">Salvar Alterações</button>
        </div>
    </div>

    <script>
        const MASTER_PIN = "16359001";

        // --- SEGURANÇA & SESSÃO ---
        document.getElementById('pinInput').addEventListener('input', (e) => {
            if (e.target.value === MASTER_PIN) {
                sessionStorage.setItem('benai_auth', 'true');
                document.getElementById('gatekeeper').style.display = 'none';
            }
        });

        if (sessionStorage.getItem('benai_auth') === 'true') {
            document.getElementById('gatekeeper').style.display = 'none';
        }

        // --- DATA POR EXTENSO ---
        function setDate() {
            const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
            const today = new Date().toLocaleDateString('pt-BR', options);
            document.getElementById('currentDate').innerText = today;
        }

        // --- STATUS DO TOKEN ---
        function checkTokenStatus() {
            const token = localStorage.getItem('BENAI_GLOBAL_TOKEN');
            const dot = document.getElementById('statusDot');
            const text = document.getElementById('statusText');

            if (token && token.startsWith('ghp_') && token.length > 10) {
                dot.className = 'dot dot-online';
                text.innerText = 'Nuvem Conectada';
            } else {
                dot.className = 'dot dot-offline';
                text.innerText = 'Nuvem Desconectada';
            }
        }

        // --- CONFIGURAÇÕES ---
        function toggleModal(show) {
            document.getElementById('configModal').style.display = show ? 'flex' : 'none';
            if (show) document.getElementById('globalToken').value = localStorage.getItem('BENAI_GLOBAL_TOKEN') || '';
        }

        function saveSettings() {
            const token = document.getElementById('globalToken').value.trim();
            localStorage.setItem('BENAI_GLOBAL_TOKEN', token);
            checkTokenStatus();
            alert("Sincronização configurada!");
            toggleModal(false);
        }

        function exportBackup() {
            const data = {};
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                data[key] = localStorage.getItem(key);
            }
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `benai_full_backup_${new Date().getTime()}.json`;
            a.click();
        }

        function importBackup(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    Object.keys(data).forEach(key => localStorage.setItem(key, data[key]));
                    alert("Dados restaurados! Reiniciando...");
                    location.reload();
                } catch (err) { alert("Arquivo inválido."); }
            };
            reader.readAsText(file);
        }

        // Inicialização
        setDate();
        checkTokenStatus();
        lucide.createIcons();
    </script>
</body>
</html>
